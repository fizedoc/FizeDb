=========
Oci驱动
=========


::

    需要启用扩展ext-oci8


+-------------+--------------------------------------------+
|属性         |值                                          |
+=============+============================================+
|命名空间     |fize\\db\\realization\\oracle\\mode\\driver |
+-------------+--------------------------------------------+
|类名         |Oci                                         |
+-------------+--------------------------------------------+


:常量:


+---------------------------+----+-------------------------+
|名称                       |值  |说明                     |
+===========================+====+=========================+
|`CONNECT_TYPE_DEFALUT`_    |1   |连接类型：默认           |
+---------------------------+----+-------------------------+
|`CONNECT_TYPE_NEW`_        |2   |连接类型：新连接         |
+---------------------------+----+-------------------------+
|`CONNECT_TYPE_PERSISTENT`_ |3   |连接类型：长连接         |
+---------------------------+----+-------------------------+


:方法:


+---------------------------+-------------------------------------------------------------+
|方法名                     |说明                                                         |
+===========================+=============================================================+
|`__construct()`_           |构造，创建连接                                               |
+---------------------------+-------------------------------------------------------------+
|`__destruct()`_            |析构时关闭连接                                               |
+---------------------------+-------------------------------------------------------------+
|`clientVersion()`_         |返回Oracle客户端库版本                                       |
+---------------------------+-------------------------------------------------------------+
|`close()`_                 |关闭 Oracle 连接                                             |
+---------------------------+-------------------------------------------------------------+
|`commit()`_                |提交未执行的事务处理                                         |
+---------------------------+-------------------------------------------------------------+
|`connect()`_               |建立一个到 Oracle 服务器的连接                               |
+---------------------------+-------------------------------------------------------------+
|`error()`_                 |返回上一个错误                                               |
+---------------------------+-------------------------------------------------------------+
|`freeDescriptor()`_        |释放描述符                                                   |
+---------------------------+-------------------------------------------------------------+
|`internalDebug()`_         |打开或关闭内部调试输出                                       |
+---------------------------+-------------------------------------------------------------+
|`lobCopy()`_               |复制大对象副本                                               |
+---------------------------+-------------------------------------------------------------+
|`lobIsEqual()`_            |判断两个大对象副本是否相等                                   |
+---------------------------+-------------------------------------------------------------+
|`newCollection()`_         |分配新的 collection 对象                                     |
+---------------------------+-------------------------------------------------------------+
|`newConnect()`_            |建定一个到 Oracle 服务器的新连接                             |
+---------------------------+-------------------------------------------------------------+
|`newCursor()`_             |分配并返回一个新的游标                                       |
+---------------------------+-------------------------------------------------------------+
|`newDescriptor()`_         |初始化一个新的空 LOB 或 FILE 描述符                          |
+---------------------------+-------------------------------------------------------------+
|`parse()`_                 |配置 Oracle 语句预备执行                                     |
+---------------------------+-------------------------------------------------------------+
|`passwordChange()`_        |修改 Oracle 用户的密码                                       |
+---------------------------+-------------------------------------------------------------+
|`pconnect()`_              |使用一个持久连接连到 Oracle 数据库                           |
+---------------------------+-------------------------------------------------------------+
|`registerTafCallback()`_   |为Oracle数据库TAF注册一个用户定义的回调函数                  |
+---------------------------+-------------------------------------------------------------+
|`rollback()`_              |回滚未提交的事务                                             |
+---------------------------+-------------------------------------------------------------+
|`serverVersion()`_         |返回服务器版本信息                                           |
+---------------------------+-------------------------------------------------------------+
|`setAction()`_             |设置动作名称                                                 |
+---------------------------+-------------------------------------------------------------+
|`setCallTimeout()`_        |设置数据库调用的毫秒超时                                     |
+---------------------------+-------------------------------------------------------------+
|`setClientIdentifier()`_   |设置客户端标识符                                             |
+---------------------------+-------------------------------------------------------------+
|`setClientInfo()`_         |设置客户端信息                                               |
+---------------------------+-------------------------------------------------------------+
|`setDbOperation()`_        |设置数据库操作                                               |
+---------------------------+-------------------------------------------------------------+
|`setEdition()`_            |设置数据库版本                                               |
+---------------------------+-------------------------------------------------------------+
|`setModuleName()`_         |设置模块名称                                                 |
+---------------------------+-------------------------------------------------------------+
|`unregisterTafCallback()`_ |取消注册Oracle数据库TAF的用户定义回调函数                    |
+---------------------------+-------------------------------------------------------------+


常量
======
CONNECT_TYPE_DEFALUT
--------------------
连接类型：默认

:修饰符:
  public

:类型:
  int

:值:
  1


CONNECT_TYPE_NEW
----------------
连接类型：新连接

:修饰符:
  public

:类型:
  int

:值:
  2


CONNECT_TYPE_PERSISTENT
-----------------------
连接类型：长连接

:修饰符:
  public

:类型:
  int

:值:
  3


方法
======
__construct()
-------------
构造，创建连接

.. code-block:: php

  public function __construct (
      string $username,
      string $password,
      string $connection_string = null,
      string $character_set = null,
      int $session_mode = null,
      int $connect_type = 1
  )


:参数:
  +------------------+-------------+
  |名称              |说明         |
  +==================+=============+
  |username          |用户名       |
  +------------------+-------------+
  |password          |密码         |
  +------------------+-------------+
  |connection_string |连接串       |
  +------------------+-------------+
  |character_set     |编码         |
  +------------------+-------------+
  |session_mode      |会话模式     |
  +------------------+-------------+
  |connect_type      |连接模式     |
  +------------------+-------------+
  
  


__destruct()
------------
析构时关闭连接

.. code-block:: php

  public function __destruct ()



clientVersion()
---------------
返回Oracle客户端库版本

.. code-block:: php

  public static function clientVersion () : string



close()
-------
关闭 Oracle 连接

.. code-block:: php

  public function close () : bool



commit()
--------
提交未执行的事务处理

.. code-block:: php

  public function commit () : bool



connect()
---------
建立一个到 Oracle 服务器的连接

.. code-block:: php

  public function connect (
      string $username,
      string $password,
      string $connection_string = null,
      string $character_set = null,
      int $session_mode = null
  )


:参数:
  +------------------+-------------+
  |名称              |说明         |
  +==================+=============+
  |username          |用户名       |
  +------------------+-------------+
  |password          |密码         |
  +------------------+-------------+
  |connection_string |连接串       |
  +------------------+-------------+
  |character_set     |编码         |
  +------------------+-------------+
  |session_mode      |会话模式     |
  +------------------+-------------+
  
  


error()
-------
返回上一个错误

.. code-block:: php

  public function error () : array



freeDescriptor()
----------------
释放描述符

.. code-block:: php

  public static function freeDescriptor (
      \OCI_Lob|resource $descriptor
  ) : bool


:参数:
  +-----------+----------+
  |名称       |说明      |
  +===========+==========+
  |descriptor |描述符    |
  +-----------+----------+
  
  


internalDebug()
---------------
打开或关闭内部调试输出

.. code-block:: php

  public static function internalDebug (
      int $onoff
  )


:参数:
  +-------+-----------------------------------------------------------+
  |名称   |说明                                                       |
  +=======+===========================================================+
  |onoff  |设置 onoff 为 0 关闭调试输出，为 1 则打开。                |
  +-------+-----------------------------------------------------------+
  
  


lobCopy()
---------
复制大对象副本

.. code-block:: php

  public static function lobCopy (
      \OCI_Lob $lob_to,
      \OCI_Lob $lob_from,
      int $length = 0
  ) : bool


:参数:
  +---------+-------------------------------------+
  |名称     |说明                                 |
  +=========+=====================================+
  |lob_to   |接受复制值的对象                     |
  +---------+-------------------------------------+
  |lob_from |被复制的对象                         |
  +---------+-------------------------------------+
  |length   |指示要复制的数据的长度。             |
  +---------+-------------------------------------+
  
  

:返回值:
  成功时返回 TRUE， 或者在失败时返回 FALSE


lobIsEqual()
------------
判断两个大对象副本是否相等

.. code-block:: php

  public static function lobIsEqual (
      \OCI_Lob $lob1,
      \OCI_Lob $lob2
  ) : bool


:参数:
  +-------+--------+
  |名称   |说明    |
  +=======+========+
  |lob1   |对象1   |
  +-------+--------+
  |lob2   |对象2   |
  +-------+--------+
  
  


newCollection()
---------------
分配新的 collection 对象

.. code-block:: php

  public function newCollection (
      string $tdo,
      string $schema = null
  ) : \OCI_Collection


:参数:
  +-------+-------------------------------------+
  |名称   |说明                                 |
  +=======+=====================================+
  |tdo    |有效的名字类型（大写）。             |
  +-------+-------------------------------------+
  |schema |指向建立名字对象的架构               |
  +-------+-------------------------------------+
  
  

:返回值:
  出错时返回false


newConnect()
------------
建定一个到 Oracle 服务器的新连接

.. code-block:: php

  public function newConnect (
      string $username,
      string $password,
      string $connection_string = null,
      string $character_set = null,
      int $session_mode = null
  )


:参数:
  +------------------+-------------+
  |名称              |说明         |
  +==================+=============+
  |username          |用户名       |
  +------------------+-------------+
  |password          |密码         |
  +------------------+-------------+
  |connection_string |连接串       |
  +------------------+-------------+
  |character_set     |编码         |
  +------------------+-------------+
  |session_mode      |会话模式     |
  +------------------+-------------+
  
  


newCursor()
-----------
分配并返回一个新的游标

.. code-block:: php

  public function newCursor () : \fize\db\realization\oracle\mode\driver\oci\Statement


:返回值:
  返回预处理对象


newDescriptor()
---------------
初始化一个新的空 LOB 或 FILE 描述符

.. code-block:: php

  public function newDescriptor (
      int $type = 50
  ) : \OCI_Lob|resource


:参数:
  +-------+-------+
  |名称   |说明   |
  +=======+=======+
  |type   |类型   |
  +-------+-------+
  
  


parse()
-------
配置 Oracle 语句预备执行

.. code-block:: php

  public function parse (
      string $query
  ) : \fize\db\realization\oracle\mode\driver\oci\Statement


:参数:
  +-------+----------+
  |名称   |说明      |
  +=======+==========+
  |query  |SQL语句   |
  +-------+----------+
  
  

:返回值:
  返回预处理对象


passwordChange()
----------------
修改 Oracle 用户的密码

.. code-block:: php

  public function passwordChange (
      string $username,
      string $old_password,
      string $new_password
  ) : bool


:参数:
  +-------------+----------+
  |名称         |说明      |
  +=============+==========+
  |username     |用户名    |
  +-------------+----------+
  |old_password |原密码    |
  +-------------+----------+
  |new_password |新密码    |
  +-------------+----------+
  
  


pconnect()
----------
使用一个持久连接连到 Oracle 数据库

.. code-block:: php

  public function pconnect (
      string $username,
      string $password,
      string $connection_string = null,
      string $character_set = null,
      int $session_mode = null
  )


:参数:
  +------------------+-------------+
  |名称              |说明         |
  +==================+=============+
  |username          |用户名       |
  +------------------+-------------+
  |password          |密码         |
  +------------------+-------------+
  |connection_string |连接串       |
  +------------------+-------------+
  |character_set     |编码         |
  +------------------+-------------+
  |session_mode      |会话模式     |
  +------------------+-------------+
  
  


registerTafCallback()
---------------------
为Oracle数据库TAF注册一个用户定义的回调函数

.. code-block:: php

  public function registerTafCallback (
      mixed $callback_fn
  ) : bool


:参数:
  +------------+-------------------------------------+
  |名称        |说明                                 |
  +============+=====================================+
  |callback_fn |回调函数名或者回调函数体             |
  +------------+-------------------------------------+
  
  


rollback()
----------
回滚未提交的事务

.. code-block:: php

  public function rollback () : bool



serverVersion()
---------------
返回服务器版本信息

.. code-block:: php

  public function serverVersion () : string



setAction()
-----------
设置动作名称

.. code-block:: php

  public function setAction (
      string $action_name
  ) : bool


:参数:
  +------------+----------+
  |名称        |说明      |
  +============+==========+
  |action_name |动作名    |
  +------------+----------+
  
  


setCallTimeout()
----------------
设置数据库调用的毫秒超时

.. code-block:: php

  public function setCallTimeout (
      int $time_out
  ) : mixed


:参数:
  +---------+----------+
  |名称     |说明      |
  +=========+==========+
  |time_out |毫秒数    |
  +---------+----------+
  
  


setClientIdentifier()
---------------------
设置客户端标识符

.. code-block:: php

  public function setClientIdentifier (
      string $client_identifier
  ) : bool


:参数:
  +------------------+----------+
  |名称              |说明      |
  +==================+==========+
  |client_identifier |标识符    |
  +------------------+----------+
  
  


setClientInfo()
---------------
设置客户端信息

.. code-block:: php

  public function setClientInfo (
      string $client_info
  ) : bool


:参数:
  +------------+----------------+
  |名称        |说明            |
  +============+================+
  |client_info |客户端信息      |
  +------------+----------------+
  
  


setDbOperation()
----------------
设置数据库操作

.. code-block:: php

  public function setDbOperation (
      string $dbop
  ) : bool


:参数:
  +-------+----------------+
  |名称   |说明            |
  +=======+================+
  |dbop   |数据库操作      |
  +-------+----------------+
  
  


setEdition()
------------
设置数据库版本

.. code-block:: php

  public static function setEdition (
      string $edition
  ) : bool


:参数:
  +--------+-------+
  |名称    |说明   |
  +========+=======+
  |edition |版本   |
  +--------+-------+
  
  


setModuleName()
---------------
设置模块名称

.. code-block:: php

  public function setModuleName (
       $module_name
  ) : bool


:参数:
  +------------+-------+
  |名称        |说明   |
  +============+=======+
  |module_name |       |
  +------------+-------+
  
  


unregisterTafCallback()
-----------------------
取消注册Oracle数据库TAF的用户定义回调函数

.. code-block:: php

  public function unregisterTafCallback () : bool



